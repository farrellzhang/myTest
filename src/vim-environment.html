<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>vim C++开发环境插件安装详解 | LittleWhite</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://littlewhite.us/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://littlewhite.us/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="LittleWhite &raquo; Feed" href="http://littlewhite.us/feed" />
<link rel="alternate" type="application/rss+xml" title="LittleWhite &raquo; 评论Feed" href="http://littlewhite.us/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="LittleWhite &raquo; vim C++开发环境插件安装详解评论Feed" href="http://littlewhite.us/archives/212/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/littlewhite.us\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.12"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://littlewhite.us/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='http://littlewhite.us/wp-content/themes/twentytwelve/style.css?ver=4.5.12' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://littlewhite.us/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://littlewhite.us/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<link rel='https://api.w.org/' href='http://littlewhite.us/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://littlewhite.us/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://littlewhite.us/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='店大莫欺人——谈论锤子约架zealer事件' href='http://littlewhite.us/archives/206' />
<link rel='next' title='让你的程序更优雅的sleep' href='http://littlewhite.us/archives/234' />
<meta name="generator" content="WordPress 4.5.12" />
<link rel="canonical" href="http://littlewhite.us/archives/212" />
<link rel='shortlink' href='http://littlewhite.us/?p=212' />
<link rel="alternate" type="application/json+oembed" href="http://littlewhite.us/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flittlewhite.us%2Farchives%2F212" />
<link rel="alternate" type="text/xml+oembed" href="http://littlewhite.us/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flittlewhite.us%2Farchives%2F212&#038;format=xml" />
	<style type="text/css" id="twentytwelve-header-css">
			.site-header h1 a,
		.site-header h2 {
			color: #0066bf;
		}
		</style>
	<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="single single-post postid-212 single-format-standard custom-font-enabled">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="http://littlewhite.us/" title="LittleWhite" rel="home">LittleWhite</a></h1>
			<h2 class="site-description">以小白的心态学习大牛的技术</h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<h3 class="menu-toggle">菜单</h3>
			<a class="assistive-text" href="#content" title="跳至内容">跳至内容</a>
			<div class="nav-menu"><ul><li ><a href="http://littlewhite.us/">首页</a></li><li class="page_item page-item-66"><a href="http://littlewhite.us/allpost">全部文章</a></li></ul></div>
		</nav><!-- #site-navigation -->

			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-212" class="post-212 post type-post status-publish format-standard hentry category-c category-vim">
				<header class="entry-header">
									<h1 class="entry-title">vim C++开发环境插件安装详解</h1>
			</br>作者：littlewhite										<div class="comments-link">
					<a href="http://littlewhite.us/archives/212#comments">2条回复</a>				</div><!-- .comments-link -->
					</header><!-- .entry-header -->

				<div class="entry-content">
			<blockquote><p>C/C++是使用比例最高的程序语言，而vim是专为程序员开发的编辑器，当这两者结合起来，会给我们带来怎样的效果呢。</p></blockquote>
<p>对于windows上做C++开发的用户来说，vs为他们做了大量的工作，语法高亮、自动缩进、智能提示等等，当你happy的使用vs时，请记住一点，这是一个收费软件，虽然在我大中华普遍都在使用微软的盗版软件，但作为程序员我们心里应该知道这是不对的行为，然后再去——等等，我们今天讨论的不是这个话题，我们要说的是Linux下的免费软件vim！</p>
<p>vim插件安装的教程在互联网上已经数不胜数，但是质量也参差不齐，很多都是在其它地方转载copy，而且没有注明使用环境，很多人安装时发现无法work，最后搞得一团糟，今天这篇文章的宗旨只有两个：1、使得安装简单；2、保证可以用。</p>
<p>阅读这篇文章的前提是你至少使用过vim，知道基本的操作。下面就开始进入主题。</p>
<h2>安装环境</h2>
<ul>
<li>CentOS release 6.3 (Final)</li>
<li>VIM 7.2</li>
</ul>
<p>本文的插件安装均在以上环境中进行，顺带也会提一下其它平台的安装方式。</p>
<h2>准备工作</h2>
<p>由于大多数vim插件都可以在github上找到，而且通过git安装、删除、升级插件都异常简单，因此我们需要首先安装git工具，如果不知道git和github，可以先自行Google</p>
<p><strong>centos安装</strong></p>
<pre><code>sudo yum install git
</code></pre>
<p><strong>ubuntu安装</strong></p>
<pre><code>sudo apt-get install git
</code></pre>
<p><strong>Mac安装</strong><br />
由于Mac没有像yum和apt-get一样的包管理工具，需要先安装一个类似的包管理工具，这对于安装一些Linux命令是非常有帮助的</p>
<ol>
<li>安装包管理工具<a href="http://brew.sh/">homebrew</a>
<pre><code> ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
</code></pre>
</li>
<li>通过brew安装git
<pre><code> brew install git
</code></pre>
</li>
</ol>
<p>我将本文需要安装的插件和配置文件都放在了github上，如果你不想大费周折的了解每个插件的安装方式，可以直接下载所有插件即可使用，项目地址<a href="https://github.com/handy1989/vim">https://github.com/handy1989/vim</a>，可以按照如下命令备份并一次安装所有插件（注意，从git上下载的vim目录下都是隐藏文件，<code>ls -a</code>可以查看）</p>
<pre><code>mv ~/.vimrc ~/.vimrcbak
mv ~/.vim ~/.vimbak
git clone https://github.com/handy1989/vim.git
mv vim/.vimrc vim/.vim ~/
</code></pre>
<h2>第一个插件</h2>
<p>为了不让插件安装后目录显得凌乱，我们很有必要安装一个管理插件的插件，这样功能的插件有好几个，这里只推荐一个<strong>pathogen</strong></p>
<p><strong>项目地址</strong><br />
<a href="https://github.com/tpope/vim-pathogen">https://github.com/tpope/vim-pathogen</a></p>
<p><strong>安装</strong><br />
可以通过git安装，也可以直接下载插件文件，由于这个插件只有一个文件，我们选择后者，而该插件的说明文档上也是用的这种方法。</p>
<pre><code>mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; 
curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
</code></pre>
<p>然后，就没有然后，这个插件就安装完了。是不是觉得so easy! 不过先别急，我们还要对插件进行一些配置，用vim打开~/.vimrc，输入如下三行类容</p>
<pre><code>execute pathogen#infect()
syntax on
filetype plugin indent on
</code></pre>
<p>保存退出，这个插件的安装配置就完成了，怎么验证插件有没有生效呢，别急，后面有的是机会验证。我们先来讲讲vim插件是个什么东西。</p>
<p>此时你的~/.vim目录结构应该是这样的</p>
<pre><code>├── autoload
│   └── pathogen.vim
└── bundle
</code></pre>
<p>可见~/.vim目录下是有两个目录，其中autoload放的是pathogen插件，所谓的插件其实就是一个脚本，当vim启动时，它会自动加载~/.vim/autoload目录下的脚本，由于你~/.vimrc里配置了<code>execute pathogen#infect()</code>，所以它会去自动的执行脚本里这个函数，至于这个函数是怎么实现的，我们不用管它，总之这个函数的功能就是去加载~/.vim/bundle目录下你安装的所有插件，pathogen的管理方法大致就是这样，而我们也看到，vim的插件其实就是一个脚本文件，丰富一点的还会带有说明文档等其它内容，后面我们碰到了再讲解。</p>
<h2>auto-pairs</h2>
<p><strong>项目地址</strong><br />
<a href="https://github.com/jiangmiao/auto-pairs">https://github.com/jiangmiao/auto-pairs</a>（感兴趣的可以看）</p>
<p><strong>功能</strong><br />
自动匹配括号、引号等</p>
<p><strong>安装</strong></p>
<pre><code>git clone git://github.com/jiangmiao/auto-pairs.git ~/.vim/bundle/auto-pairs
</code></pre>
<p>这样就将auto-pairs在github上的项目文件下载到了~/.vim/bundle/auto-pairs目录下</p>
<p><strong>测试</strong><br />
随便打开一个文件，输入左括号'('，看右括号是不是自动出现了，然后删除左括号，看右括号是不是也被删除了。当然功能远不止这些，但常用的就这几点。</p>
<h2>NERDTree</h2>
<p><strong>项目地址</strong><br />
<a href="https://github.com/scrooloose/nerdtree">https://github.com/scrooloose/nerdtree</a></p>
<p><strong>功能</strong><br />
显示目录树</p>
<p><strong>安装</strong></p>
<pre><code>git clone https://github.com/scrooloose/nerdtree.git ~/.vim/bundle
</code></pre>
<p>此时~/.vim/bundle/nerdtree下应该有如下几个目录和文件</p>
<pre><code>autoload
doc
lib
nerdtree_plugin
plugin
README.markdown
syntax
</code></pre>
<p>这几个目录是vim默认的插件目录，如果我们不是通过pathogen加载插件，就需要在~/.vim目录下创建对应的这几个目录，并将NERDTree对应的文件拷到相应的目录，这样每个目录下会放置多个插件的内容，比如~/.vim/doc下就会放置所有插件的帮组文档，而我们通过pathogen来管理，每个插件的所有内容都放在同一个目录中，比如这里的NERDTree插件的内容我们下载到了~/.vim/bundle/nerdtree下，直接删除这个目录即可删除插件，如果后续插件有更新，在该目录下通过git命令也可以很容易更新到最新版本。</p>
<p>打开vim，在命令行模式下输入:Helptags载入插件的帮组文档，或者用:helptags help_dir载入指定目录的帮组文档，其中help_dir是你需要加载的插件帮组文档所在的目录，比如这里是~/.vim/bundle/nerdtree/doc</p>
<p><strong>测试</strong><br />
用vim打开一个文件，在命令行模式下输入:NERDTree，然后回车，窗口左侧就出现了vim工作目录的目录树，如下图所示<br />
<img alt="" src="http://littlewhite.us/pic/nerdtree.png" /></p>
<p>将光标置于NERDTree窗口，按'?'可查看帮助，NERDTree的操作很简单，通常是将光标置于一个目录/文件上，通过一个按键来操作，下面列出几个常用按键及其对应的操作</p>
<pre><code>文件相关操作
o  : 在光标所在的上一个窗口打开文件，并将光标置于新打开的窗口
go : 预览文件，光标停留在NERDTree窗口中
t  : 在新标签中打开文件并激活
gt : 在新标签打开文件，光标留在NERDTree窗口中
i  : 水平分割打开文件
gi : 水平分割预览
s  : 垂直分割打开文件
gs : 垂直分割预览

目录树相关操作
o  : 展开/关闭目录
O  : 递归展开目录。慎用，如果目录层级多，打开会很慢
x  : 关闭父目录
C  : 切换光标所在目录为根目录
u  : 切换目录树的根目录为上层目录
U  : 切换目录树的根目录为上层目录，并保持旧的目录树的状态
r  : 刷新当前目录
R  : 刷新当前根目录（这个在新加入文件后会用到）
cd : 切换vim工作目录为光标所在目录（命令模式下:pwd可查看当前工作目录）
</code></pre>
<p>为了方便打开NERDTree，我们可以设置快捷键，打开~/.vimrc，插入如下一行</p>
<pre><code>map &lt;C-n&gt; :NERDTree&lt;CR&gt;
</code></pre>
<p>这样，当打开vim时，只要输入ctrl+n即可打开NERDTree</p>
<h2>MiniBufExplorer</h2>
<p><strong>项目地址</strong><br />
<a href="http://www.vim.org/scripts/script.php?script_id=159">http://www.vim.org/scripts/script.php?script_id=159</a></p>
<p><strong>功能</strong><br />
显示已打开的buffer</p>
<p><strong>安装</strong><br />
以6.3.2版本为例，根据项目地址可以找到对应版本的下载链接</p>
<pre><code>mkdir -p ~/.vim/bundle/minibufexplorer/plugin &amp;&amp; wget "http://www.vim.org/scripts/download_script.php?src_id=3640" -O ~/.vim/bundle/minibufexplorer/plugin/minibufexpl.vim
</code></pre>
<p><strong>测试</strong><br />
用vim打开一个文件，此时看不到minibufexplorer窗口，因为默认是只有一个buffer时不显示窗口的，在命令行模式下通过<code>:vsp filename</code>打开另一个文件（或者用NERDTree浏览打开其它文件），看看此时窗口上方是不是出现了MiniBufExplorer的窗口，如下所示<br />
<img alt="" src="http://littlewhite.us/pic/minibufexplorer.png" /></p>
<p>我们先来解释一下什么叫buffer，vim为每个打开的文件都创建了一个buffer，这个buffer存储在内存中，为了下次打开文件时快速加载，比如我们通过NERDTree浏览并打开了多个文件，即便某些文件你退出了编辑，它的buffer仍旧是存在的，在命令模式下，我们输入<code>:ls</code>可以查看打开的buffer列表，每一行前面的数字对应buffer的编号，通过输入<code>:b N</code>，其中N代表buffer编号，可以打开对应的buffer。对应上面的截图，我们打开了两个文件，此时minibufexplorer窗口显示有两个buffer，即便我们关闭一个文件，这两个buffer仍然存在，将光标移到某个buffer的名称上，回车可打开对应的buffer，按<code>d</code>可删除buffer，具体的操作可以直接阅读插件文件，路径为~/.vim/bundle/minibufexplorer/plugin/minibufexpl.vim</p>
<p><strong>配置</strong><br />
在~/.vimrc文件中加入如下命令</p>
<pre><code>let g:miniBufExplMaxSize = 2
</code></pre>
<p>该配置含义为minibufexplorer窗口最大高度为2行，默认是没有上限的，你打开的buffer足够多，一会一直增长下去，为了方便阅读我一般将它设为2，其它配置不怎么用到，需要用的时候可以参考插件文件，并在~/.vimrc中添加配置</p>
<h2>ctags+taglist+omnicppcomplete</h2>
<p>接下来就到了重磅戏了，前面还只是一些窗口相关的基本操作，是为了方便浏览文件，我们阅读C++代码时希望能快速定位函数、变量，类似于VS等其它IDE提供的功能</p>
<h3>ctags</h3>
<p>这个并不是插件，而是可执行程序，是用来对代码建索引，方便查找的，有些Linux版本是自带ctags的，如果没有，按如下方式安装</p>
<pre><code>sudo yum install ctags
</code></pre>
<p>ubuntu安装方式</p>
<pre><code>sudo apt-get install ctags
</code></pre>
<p>mac也是自带ctags的，但是那个不好用，可以重新安装</p>
<pre><code>brew install ctags
</code></pre>
<p>如果安装失败，看是不是因为/usr/bin/ctags文件已经存在，可以先mv走，然后再执行</p>
<p>创建索引：在你代码的根目录执行如下命令，会生成一个tags文件，此时在代码根目录下打开一个文件（vim默认只加载工作目录下的tags文件），将光标置于一个函数或结构体名字上，按<code>ctr+]</code>即可跳转到该名称的定义处，如果出现多个选项，可以输入编号选择对应跳转的地方，按<code>ctr+o</code>可回到光标之前的位置</p>
<pre><code>ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++
</code></pre>
<h3>taglist</h3>
<p>taglist是vim的一个插件，可以将代码内的函数、变量等按规律列出来，方便查找</p>
<p><strong>下载地址</strong><br />
<a href="http://www.vim.org/scripts/script.php?script_id=273">http://www.vim.org/scripts/script.php?script_id=273</a>，或者直接按如下方式下载并安装</p>
<pre><code>cd ~/.vim/bundle &amp;&amp; wget "http://www.vim.org/scripts/download_script.php?src_id=19574" -O taglist.zip &amp;&amp; unzip taglist.zip -d taglist
</code></pre>
<p>这样就生成了~/.vim/bundle/taglist目录，该目录的结构为</p>
<pre><code>taglist
├── doc
│   └── taglist.txt
└── plugin
    └── taglist.vim
</code></pre>
<p>其中plugin目录下为插件文件，doc目录下为说明文档。打开vim，在命令行模式下输入<code>:helptags ~/.vim/bundle/taglist/doc</code>可以加载说明文档，然后输入<code>help taglist.txt</code>则可以显示说明文档</p>
<p><strong>配置</strong><br />
打开~/.vimrc，输入如下内容</p>
<pre><code>let Tlist_Show_One_File=1    “ 只展示一个文件的taglist
let Tlist_Exit_OnlyWindow=1  “ 当taglist是最后以个窗口时自动退出
let Tlist_Use_Right_Window=1 " 在右边显示taglist窗口
let Tlist_Sort_Type="name"   “ tag按名字排序
</code></pre>
<p>这几行配置看名字就能知道什么意思，引号后边是说明，在vim配置文件里，双引号代表注释，类似于C语言里的/</p>
<p><strong>测试</strong><br />
打开一个文件，在命令行模式下输入<code>:TlistToggle</code>即可显示taglist窗口，配合NERDTree一起效果如下<br />
<img alt="" src="http://littlewhite.us/pic/taglist.png" /></p>
<h3>OmniCppComplete</h3>
<p>这是一个对C++进行语法补全的插件，可以对函数、命名空间、类成员等进行补全，使用起来和绝大多数IDE差不多，不一样的是IDE为你做了很多你不知道的事情，而omni补全需要依赖tags文件，需要你用ctags命令自己生成</p>
<p><strong>下载地址</strong><br />
<a href="http://www.vim.org/scripts/script.php?script_id=1520">http://www.vim.org/scripts/script.php?script_id=1520</a></p>
<p>也可用如下命令直接下载并安装</p>
<pre><code>cd ~/.vim/bundle &amp;&amp; wget "http://www.vim.org/scripts/download_script.php?src_id=7722" -O omnicppcomplete.zip &amp;&amp; unzip omnicppcomplete.zip -d omnicppcomplete
</code></pre>
<p>该命令会生成~/.vim/bundle/omnicppcomplete目录，目录结构为</p>
<pre><code>├── after
│   └── ftplugin
│       ├── cpp.vim
│       └── c.vim
├── autoload
│   └── omni
│       ├── common
│       │   ├── debug.vim
│       │   └── utils.vim
│       └── cpp
│           ├── complete.vim
│           ├── includes.vim
│           ├── items.vim
│           ├── maycomplete.vim
│           ├── namespaces.vim
│           ├── settings.vim
│           ├── tokenizer.vim
│           └── utils.vim
└── doc
    └── omnicppcomplete.txt
</code></pre>
<p>打开vim，在命令行模式下输入<code>:helptags ~/.vim/bundle/omnicppcomplete/doc</code>即可加载说明文档，输入<code>:help omnicppcomplete</code>查看说明文档</p>
<p><strong>配置</strong><br />
打开~/.vimrc文件，输入</p>
<pre><code>filetype plugin indent on
set completeopt=longest,menu
let OmniCpp_NamespaceSearch = 2     " search namespaces in the current buffer   and in included files
let OmniCpp_ShowPrototypeInAbbr = 1 " 显示函数参数列表
let OmniCpp_MayCompleteScope = 1    " 输入 :: 后自动补全
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]
</code></pre>
<p><strong>测试</strong><br />
前面说过，omni插件的补全是依赖于tags文件的，因此需要我们手动建立tags文件，假设现在有两个文件hello.h和hello.cpp如下<br />
<img alt="" src="http://littlewhite.us/pic/omni_hello.png" /></p>
<p>我们在和这两个文件所在的目录输入</p>
<pre><code>ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++
</code></pre>
<p>这样就生成了tags文件，然后我们打开main.cpp来测试，当输入hello.h和hello.cpp中的函数或结构体时，通过按<code>ctr+x ctr+o</code>就可以自动补全了，效果如下<br />
<img alt="" src="http://littlewhite.us/pic/omni_main.png" /></p>
<p>通过按ctr+n和ctr+p可以对候选项进行上下选择。通过这种方式可以实现对函数、结构体的补全</p>
<p><strong>对STL补全</strong><br />
上面的方式只能对自己的代码进行补全，是当我们要使用其它库比如STL甚至是第三方库时就无法补全，原因很简单，我们只对自己的代码建立了tags文件，想要对其它库进行补全，就必须对它们的源代码建立tags文件，所幸的是vim的插件编写者们早已解决了这个需求，并且他们专门针对STL头文件进行了修改，以便能更好的适应omni的补全，首先下载STL源代码，地址为<a href="http://www.vim.org/scripts/script.php?script_id=2358">http://www.vim.org/scripts/script.php?script_id=2358</a>，可通过如下命令下载并解压</p>
<pre><code>mkdir -p ~/.vim/tags &amp;&amp; cd ~/.vim/tags &amp;&amp; wget "http://www.vim.org/scripts/download_script.php?src_id=9178" -O - | tar jxvf -
</code></pre>
<p>这样就将STL的源码下载到了~/.vim/tags/cpp_src目录下，我们在该目录下执行ctags命令</p>
<pre><code>ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q --language-force=C++
</code></pre>
<p>这样就生成了~/.vim/tags/cpp_src/tags这个文件，然后打开~/.vimrc进行如下设置</p>
<pre><code>set tags+=~/.vim/tags/cpp_src/tags
</code></pre>
<p>该命令是设置tags文件的搜索路径，默认只有vim工作目录的tags文件，这样设置之后就会同时加载指定目录的tags文件，你可以在后面添加更多其它第三方库的tags文件，现在对STL的补全效果如下</p>
<div align="center"><img alt="" src="http://littlewhite.us/pic/omni_stl.png" /></div>
<p>omnicppcomplete的补全设置虽然麻烦，但也让我们更加清楚了插件是怎样工作的，作为程序员，至少应该对某些东西的工作原理搞清楚，而不是像使用IDE一样不管任何东西，你想自定义一下东西也无从下手。</p>
<p>omnicppcomplete触发补全需要用到<code>ctr+x ctr+o</code>，显然这是不友好的，熟悉Linux命令行的人一定对shell命令的补全印象深刻，只需要按一下TAB键就可以进行补全，vim插件的强大之处在于，它可以实现你几乎所有的需求，想要用TAB键进行补全，就需要用到SuperTab</p>
<h3>SuperTab</h3>
<p><strong>项目地址</strong><br />
<a href="https://github.com/ervandew/supertab">https://github.com/ervandew/supertab</a></p>
<p><strong>安装</strong><br />
使用git进行安装是最方便的</p>
<pre><code>cd ~/.vim/bundle &amp;&amp; git clone https://github.com/ervandew/supertab.git
</code></pre>
<p><strong>测试</strong><br />
无需任何配置即可使用，这时你想要补全变量名或函数名只需按一下TAB键即可，出现候选窗口之后也可以用TAB键进行选择，这样是不是方便了很多！</p>
<p>由于TAB键被映射成了补全快捷键，也就无法通过TAB键直接输入制表符，这时如果想要输入制表符可以通过<code>ctr+v TAB</code>即可，即先输入ctr+v再输入TAB键，在vim下通过ctl+v可以输入很多不可见字符，比如试试<code>ctr+v ctr+w</code></p>
<h2>最终的配置文件</h2>
<p>装了这么多插件，在配置文件~/.vimrc里也增添了不少内容，最后你的配置文件至少应该包含以下内容</p>
<pre><code>set tags+=~/.vim/tags/cpp_src/tags   " 设置tags搜索路径
syntax on
filetype plugin indent on

map &lt;C-n&gt; :NERDTree&lt;CR&gt;

" pathongen
execute pathogen#infect()

" taglist
let Tlist_Show_One_File=1
let Tlist_Exit_OnlyWindow=1
let Tlist_Use_Right_Window=1
let Tlist_Sort_Type="name"

" omnicppcomplete
set completeopt=longest,menu
let OmniCpp_NamespaceSearch = 2     " search namespaces in the current buffer and in included files
let OmniCpp_ShowPrototypeInAbbr = 1 " 显示函数参数列表
let OmniCpp_MayCompleteScope = 1    " 输入 :: 后自动补全
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]
</code></pre>
<p>这个配置文件全都是和插件相关的配置，你还可以在里面添加其它配置来灵活定制你的vim，由于本文主要介绍插件相关内容，就不展开介绍了</p>
<h2>总结</h2>
<p>vim的C++开发环境到此就配好了，总的来说我们安装了这么几类插件</p>
<ol>
<li>管理插件的插件</li>
<li>管理窗口和buffer</li>
<li>语法增强</li>
<li>代码补全</li>
</ol>
<p>通过这些插件我们可以将vim打造成一个好用的IDE，虽然经过了很多周折，但这些功夫都不会白费，一来我们可以通过这些插件了解IDE的一些工作原理，二来通过这些插件的安装我们也更加了解了vim插件的使用方法，有了这些基础，后续如果想满足一些个性化的需求，岂不易哉！</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			本条目发布于<a href="http://littlewhite.us/archives/212" title="09:45" rel="bookmark"><time class="entry-date" datetime="2014-09-02T09:45:30+00:00">2014 年 9 月 2 日</time></a>。属于<a href="http://littlewhite.us/archives/category/c%e5%9f%ba%e7%a1%80" rel="category tag">C++基础</a>、<a href="http://littlewhite.us/archives/category/vim" rel="category tag">vim</a>分类。<span class="by-author">作者是<span class="author vcard"><a class="url fn n" href="http://littlewhite.us/archives/author/littlewhite" title="查看所有由littlewhite发布的文章" rel="author">littlewhite</a></span>。</span>								</footer><!-- .entry-meta -->
	</article><!-- #post -->
				<nav class="nav-single">
					<h3 class="assistive-text">文章导航</h3>
					<span class="nav-previous"><a href="http://littlewhite.us/archives/206" rel="prev"><span class="meta-nav">&larr;</span> 店大莫欺人——谈论锤子约架zealer事件</a></span>
					<span class="nav-next"><a href="http://littlewhite.us/archives/234" rel="next">让你的程序更优雅的sleep <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single -->

				
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			《<span>vim C++开发环境插件安装详解</span>》上有2条评论		</h2>

		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-409">
		<article id="comment-409" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/414a1c63c134aed89c0c68d3a188bf3c?s=44&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/414a1c63c134aed89c0c68d3a188bf3c?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn">萨达</b> </cite><a href="http://littlewhite.us/archives/212#comment-409"><time datetime="2016-03-27T22:07:27+00:00">2016 年 3 月 27 日22:07</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>mv vim/.vimrc ~/.vim ~/ 这行指令什么意思呢，楼主</p>
							</section><!-- .comment-content -->

			<div class="reply">
				<a rel='nofollow' class='comment-reply-link' href='http://littlewhite.us/archives/212?replytocom=409#respond' onclick='return addComment.moveForm( "comment-409", "409", "respond", "212" )' aria-label='回复给萨达'>回复</a> <span>&darr;</span>			</div><!-- .reply -->
		</article><!-- #comment-## -->
	<ol class="children">
	<li class="comment byuser comment-author-littlewhite bypostauthor odd alt depth-2" id="li-comment-410">
		<article id="comment-410" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://2.gravatar.com/avatar/25080aeef17ca8c953c703f161ae5929?s=44&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/25080aeef17ca8c953c703f161ae5929?s=88&amp;d=mm&amp;r=g 2x' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn">littlewhite</b> <span>文章作者</span></cite><a href="http://littlewhite.us/archives/212#comment-410"><time datetime="2016-04-07T22:31:20+00:00">2016 年 4 月 7 日22:31</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>不好意思，写错了，应该是mv vim/.vimrc vim/.vim ~/</p>
							</section><!-- .comment-content -->

			<div class="reply">
				<a rel='nofollow' class='comment-reply-link' href='http://littlewhite.us/archives/212?replytocom=410#respond' onclick='return addComment.moveForm( "comment-410", "410", "respond", "212" )' aria-label='回复给littlewhite'>回复</a> <span>&darr;</span>			</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .commentlist -->

		
		
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/archives/212#respond" style="display:none;">取消回复</a></small></h3>				<form action="http://littlewhite.us/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">电子邮件地址不会被公开。</span> 必填项已用<span class="required">*</span>标注</p><p class="comment-form-comment"><label for="comment">评论</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">姓名 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">电子邮件 <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">站点</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='212' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c8bfffeea9" /></p>				</form>
					</div><!-- #respond -->
		
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-2" class="widget widget_text">			<div class="textwidget"><img src="http://littlewhite.us/pic/littlewhite.jpg"></div>
		</aside><aside id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://littlewhite.us/">
				<div>
					<label class="screen-reader-text" for="s">搜索：</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="搜索" />
				</div>
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">近期文章</h3>		<ul>
					<li>
				<a href="http://littlewhite.us/archives/427">boost内存池singleton_pool详解</a>
						</li>
					<li>
				<a href="http://littlewhite.us/archives/420">cppcheck使用方式详解</a>
						</li>
					<li>
				<a href="http://littlewhite.us/archives/416">深入理解vim编码设置</a>
						</li>
					<li>
				<a href="http://littlewhite.us/archives/411">C++数据库操作之SOCI</a>
						</li>
					<li>
				<a href="http://littlewhite.us/archives/408">详解Linux shell命令帮助格式</a>
						</li>
				</ul>
		</aside>		<aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">功能</h3>			<ul>
						<li><a href="http://littlewhite.us/wp-login.php">登录</a></li>
			<li><a href="http://littlewhite.us/feed">文章<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://littlewhite.us/comments/feed">评论<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>			</ul>
			</aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
						<a href="http://cn.wordpress.org/" title="优雅的个人发布平台"></a>
		</div><!-- .site-info -->
        <div align="center"><a href="http://www.miitbeian.gov.cn/" rel="external nofollow" target="_blank">鄂ICP备14017545号</a></div>
	</footer><!-- #colophon -->
</div><!-- #page -->
 
<script type='text/javascript' src='http://littlewhite.us/wp-includes/js/comment-reply.min.js?ver=4.5.12'></script>
<script type='text/javascript' src='http://littlewhite.us/wp-content/themes/twentytwelve/js/navigation.js?ver=1.0'></script>
<script type='text/javascript' src='http://littlewhite.us/wp-includes/js/wp-embed.min.js?ver=4.5.12'></script>
</body>
</html>
